<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ØªÙ‡Ù†Ø¦Ø© Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <style>
    :root {
      --bg: #0f1a2b;
      --surface: #162235;
      --surface2: #1e2f45;
      --gold: #c9a84c;
      --gold-light: #e8cc80;
      --gold-pale: #f5e6b8;
      --teal: #3a7d87;
      --teal-light: #5fa8b4;
      --cream: #f8f2e3;
      --text: #e8dfc8;
      --text-muted: #9ba8b4;
      --border: rgba(201, 168, 76, 0.25);
      --shadow: 0 8px 40px rgba(0,0,0,0.5);
      --glow: 0 0 30px rgba(201, 168, 76, 0.15);
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'IBM Plex Sans Arabic', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Stars background */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image:
        radial-gradient(1px 1px at 10% 15%, rgba(255,255,255,0.6) 0%, transparent 100%),
        radial-gradient(1.5px 1.5px at 25% 40%, rgba(255,255,255,0.4) 0%, transparent 100%),
        radial-gradient(1px 1px at 40% 10%, rgba(255,255,255,0.7) 0%, transparent 100%),
        radial-gradient(2px 2px at 55% 25%, rgba(255,255,255,0.3) 0%, transparent 100%),
        radial-gradient(1px 1px at 70% 5%, rgba(255,255,255,0.8) 0%, transparent 100%),
        radial-gradient(1.5px 1.5px at 85% 35%, rgba(255,255,255,0.5) 0%, transparent 100%),
        radial-gradient(1px 1px at 15% 60%, rgba(255,255,255,0.4) 0%, transparent 100%),
        radial-gradient(2px 2px at 35% 75%, rgba(255,255,255,0.3) 0%, transparent 100%),
        radial-gradient(1px 1px at 60% 65%, rgba(255,255,255,0.6) 0%, transparent 100%),
        radial-gradient(1.5px 1.5px at 80% 80%, rgba(255,255,255,0.4) 0%, transparent 100%),
        radial-gradient(1px 1px at 5% 85%, rgba(255,255,255,0.5) 0%, transparent 100%),
        radial-gradient(1px 1px at 90% 55%, rgba(255,255,255,0.7) 0%, transparent 100%),
        radial-gradient(1.5px 1.5px at 45% 90%, rgba(255,255,255,0.3) 0%, transparent 100%),
        radial-gradient(1px 1px at 20% 30%, rgba(255,255,255,0.5) 0%, transparent 100%),
        radial-gradient(2px 2px at 75% 50%, rgba(255,255,255,0.4) 0%, transparent 100%);
      pointer-events: none;
      z-index: 0;
    }

    .page-wrapper {
      position: relative;
      z-index: 1;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* ===== HEADER ===== */
    header {
      text-align: center;
      padding: 2.5rem 1rem 1.5rem;
      position: relative;
    }

    .site-title {
      font-size: clamp(1.4rem, 4vw, 2.2rem);
      font-weight: 700;
      color: var(--gold);
      letter-spacing: 0.04em;
      text-shadow: 0 0 20px rgba(201,168,76,0.4);
    }

    .site-subtitle {
      font-size: clamp(0.85rem, 2vw, 1rem);
      color: var(--text-muted);
      margin-top: 0.4rem;
      font-weight: 300;
    }

    .ornament {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      margin: 1rem auto;
    }

    .ornament-line {
      height: 1px;
      width: 80px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
    }

    .ornament-star {
      color: var(--gold);
      font-size: 1.1rem;
      opacity: 0.8;
    }

    /* ===== MAIN LAYOUT ===== */
    main {
      flex: 1;
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem 1.2rem 3rem;
      width: 100%;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      align-items: start;
    }

    @media (max-width: 768px) {
      main { grid-template-columns: 1fr; gap: 1.5rem; }
    }

    /* ===== CARDS ===== */
    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 1.8rem;
      box-shadow: var(--shadow), var(--glow);
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
    }

    .card-title {
      font-size: 1.05rem;
      font-weight: 600;
      color: var(--gold-light);
      margin-bottom: 1.2rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .card-title .icon {
      font-size: 1.2rem;
    }

    /* ===== UPLOAD AREA ===== */
    .upload-zone {
      border: 2px dashed var(--border);
      border-radius: 14px;
      padding: 2.2rem 1.5rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      background: rgba(201,168,76,0.03);
      position: relative;
    }

    .upload-zone:hover, .upload-zone.drag-over {
      border-color: var(--gold);
      background: rgba(201,168,76,0.07);
      transform: scale(1.01);
    }

    .upload-icon {
      font-size: 3rem;
      margin-bottom: 0.8rem;
      display: block;
    }

    .upload-zone h3 {
      font-size: 1rem;
      font-weight: 600;
      color: var(--cream);
      margin-bottom: 0.4rem;
    }

    .upload-zone p {
      font-size: 0.82rem;
      color: var(--text-muted);
      line-height: 1.6;
    }

    #fileInput { display: none; }

    .btn-upload {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 1rem;
      padding: 0.55rem 1.4rem;
      background: linear-gradient(135deg, var(--gold), var(--gold-light));
      color: #1a1000;
      border: none;
      border-radius: 10px;
      font-family: inherit;
      font-size: 0.88rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 4px 15px rgba(201,168,76,0.3);
    }

    .btn-upload:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(201,168,76,0.45);
    }

    /* ===== NAME INPUT ===== */
    .input-group {
      margin-bottom: 1.2rem;
    }

    .input-label {
      display: block;
      font-size: 0.88rem;
      color: var(--text-muted);
      margin-bottom: 0.5rem;
      font-weight: 500;
    }

    .input-field {
      width: 100%;
      padding: 0.8rem 1rem;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 10px;
      color: var(--cream);
      font-family: inherit;
      font-size: 0.95rem;
      font-weight: 500;
      outline: none;
      transition: all 0.3s;
      direction: rtl;
    }

    .input-field:focus {
      border-color: var(--gold);
      box-shadow: 0 0 0 3px rgba(201,168,76,0.12);
    }

    .input-field::placeholder { color: rgba(155,168,180,0.5); }

    /* ===== NAME POSITION ===== */
    .position-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.5rem;
      margin-top: 0.5rem;
    }

    .position-btn {
      padding: 0.5rem;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text-muted);
      font-family: inherit;
      font-size: 0.78rem;
      cursor: pointer;
      transition: all 0.25s;
      text-align: center;
    }

    .position-btn:hover, .position-btn.active {
      background: rgba(201,168,76,0.15);
      border-color: var(--gold);
      color: var(--gold-light);
    }

    /* ===== FONT SIZE & COLOR ===== */
    .range-row {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      margin-top: 0.5rem;
    }

    .range-row input[type=range] {
      flex: 1;
      -webkit-appearance: none;
      height: 4px;
      border-radius: 4px;
      background: var(--surface2);
      outline: none;
    }

    .range-row input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 16px; height: 16px;
      border-radius: 50%;
      background: var(--gold);
      cursor: pointer;
      box-shadow: 0 0 8px rgba(201,168,76,0.5);
    }

    .range-val {
      font-size: 0.8rem;
      color: var(--gold);
      min-width: 2.5rem;
      text-align: center;
    }

    .color-row {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      margin-top: 0.5rem;
    }

    .color-dot {
      width: 28px; height: 28px;
      border-radius: 50%;
      cursor: pointer;
      border: 2px solid transparent;
      transition: all 0.2s;
      flex-shrink: 0;
    }

    .color-dot:hover, .color-dot.active {
      border-color: white;
      transform: scale(1.2);
    }

    .color-picker-wrap {
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    .color-picker-wrap input[type=color] {
      width: 28px; height: 28px;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      padding: 0;
      background: none;
    }

    /* ===== SIZE PRESETS ===== */
    .size-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.6rem;
    }

    .size-btn {
      padding: 0.7rem 0.5rem;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 10px;
      color: var(--text-muted);
      font-family: inherit;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.25s;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.2rem;
    }

    .size-btn:hover, .size-btn.active {
      background: rgba(201,168,76,0.12);
      border-color: var(--gold);
      color: var(--gold-light);
    }

    .size-btn .size-icon { font-size: 1.2rem; }
    .size-btn .size-label { font-weight: 600; font-size: 0.75rem; }
    .size-btn .size-dim { font-size: 0.68rem; color: inherit; opacity: 0.7; }

    /* ===== PREVIEW ===== */
    .preview-column { position: sticky; top: 1rem; }

    .preview-wrapper {
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 300px;
      background: var(--surface2);
      border-radius: 16px;
      border: 1px solid var(--border);
      overflow: hidden;
    }

    #preview-container {
      position: relative;
      overflow: hidden;
      border-radius: 8px;
      max-width: 100%;
      max-height: 500px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #preview-image {
      display: block;
      max-width: 100%;
      max-height: 500px;
      object-fit: contain;
      border-radius: 8px;
    }

    .empty-preview {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
      color: var(--text-muted);
      padding: 3rem 2rem;
      text-align: center;
    }

    .empty-preview .empty-icon { font-size: 3.5rem; opacity: 0.5; }
    .empty-preview p { font-size: 0.9rem; line-height: 1.6; }

    /* Name overlay on preview */
    #name-overlay {
      position: absolute;
      font-family: 'IBM Plex Sans Arabic', sans-serif;
      font-weight: 700;
      text-align: center;
      pointer-events: none;
      white-space: nowrap;
      z-index: 10;
      text-shadow: 2px 2px 8px rgba(0,0,0,0.7), 0 0 20px rgba(0,0,0,0.5);
      transform: translate(-50%, -50%);
      transition: all 0.2s ease;
    }

    /* ===== DOWNLOAD SECTION ===== */
    .download-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.7rem;
      margin-top: 0.5rem;
    }

    .btn-download {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.4rem;
      padding: 0.75rem 0.6rem;
      background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
      color: #1a1000;
      border: none;
      border-radius: 10px;
      font-family: inherit;
      font-size: 0.82rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 4px 15px rgba(201,168,76,0.25);
    }

    .btn-download:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(201,168,76,0.4);
    }

    .btn-download:disabled {
      opacity: 0.4;
      cursor: not-allowed;
      transform: none;
    }

    .btn-download.secondary {
      background: linear-gradient(135deg, var(--teal) 0%, var(--teal-light) 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(58,125,135,0.25);
    }

    .btn-download.secondary:hover {
      box-shadow: 0 6px 20px rgba(58,125,135,0.4);
    }

    /* ===== SHARE SECTION ===== */
    .share-link-box {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }

    .share-link-input {
      flex: 1;
      padding: 0.65rem 0.9rem;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text-muted);
      font-family: inherit;
      font-size: 0.8rem;
      outline: none;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      direction: ltr;
    }

    .btn-copy {
      padding: 0.65rem 1rem;
      background: var(--surface2);
      border: 1px solid var(--gold);
      border-radius: 8px;
      color: var(--gold);
      font-family: inherit;
      font-size: 0.82rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.25s;
      white-space: nowrap;
    }

    .btn-copy:hover {
      background: rgba(201,168,76,0.15);
    }

    .share-buttons {
      display: flex;
      gap: 0.6rem;
      flex-wrap: wrap;
      margin-top: 0.8rem;
    }

    .btn-share {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.55rem 1rem;
      border: none;
      border-radius: 8px;
      font-family: inherit;
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.25s;
    }

    .btn-share:hover { transform: translateY(-2px); opacity: 0.9; }
    .btn-share.whatsapp { background: #25D366; color: white; }
    .btn-share.twitter { background: #1DA1F2; color: white; }
    .btn-share.telegram { background: #0088cc; color: white; }
    .btn-share.copy-link { background: var(--surface2); border: 1px solid var(--border); color: var(--text-muted); }

    /* ===== TOAST ===== */
    #toast {
      position: fixed;
      bottom: 2rem;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: var(--gold);
      color: #1a1000;
      padding: 0.7rem 1.5rem;
      border-radius: 12px;
      font-weight: 700;
      font-size: 0.9rem;
      z-index: 1000;
      transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      box-shadow: 0 8px 25px rgba(201,168,76,0.4);
      white-space: nowrap;
    }

    #toast.show { transform: translateX(-50%) translateY(0); }

    /* ===== MOON DECORATION ===== */
    .moon-deco {
      position: fixed;
      top: 1rem;
      left: 1.5rem;
      font-size: 2.5rem;
      opacity: 0.15;
      pointer-events: none;
      animation: moonFloat 6s ease-in-out infinite;
    }

    @keyframes moonFloat {
      0%, 100% { transform: translateY(0) rotate(-10deg); }
      50% { transform: translateY(-8px) rotate(-5deg); }
    }

    /* ===== PROGRESS ===== */
    .progress-steps {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0;
      margin: 0.5rem auto 1.5rem;
    }

    .step {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.8rem;
      color: var(--text-muted);
      transition: color 0.3s;
    }

    .step.active { color: var(--gold); }
    .step.done { color: var(--teal-light); }

    .step-num {
      width: 26px; height: 26px;
      border-radius: 50%;
      border: 1.5px solid currentColor;
      display: flex; align-items: center; justify-content: center;
      font-size: 0.75rem;
      font-weight: 700;
      flex-shrink: 0;
    }

    .step-line {
      width: 30px;
      height: 1px;
      background: var(--border);
      margin: 0 0.3rem;
    }

    @media (max-width: 480px) {
      .step-line { width: 18px; }
      .step span:last-child { display: none; }
    }

    /* ===== DIVIDER ===== */
    .divider {
      height: 1px;
      background: var(--border);
      margin: 1.2rem 0;
    }

    /* ===== CANVAS for export ===== */
    #export-canvas { display: none; }

    /* ===== LOADING OVERLAY ===== */
    #loading-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(15,26,43,0.85);
      z-index: 999;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      gap: 1rem;
    }

    #loading-overlay.show { display: flex; }

    .spinner {
      width: 48px; height: 48px;
      border: 3px solid rgba(201,168,76,0.2);
      border-top-color: var(--gold);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    #loading-overlay p {
      color: var(--gold-light);
      font-size: 1rem;
      font-weight: 500;
    }

    /* Scrollbar */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: var(--bg); }
    ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

    /* Responsive tweaks */
    @media (max-width: 480px) {
      .card { padding: 1.2rem; }
      .download-grid { grid-template-columns: 1fr; }
      .size-grid { grid-template-columns: repeat(2, 1fr); }
    }
  </style>
</head>
<body>

<div class="moon-deco">ğŸŒ™</div>

<div id="loading-overlay">
  <div class="spinner"></div>
  <p>Ø¬Ø§Ø±Ù ØªØ¬Ù‡ÙŠØ² Ø§Ù„ØªØµÙ…ÙŠÙ…...</p>
</div>

<div id="toast"></div>
<canvas id="export-canvas"></canvas>

<div class="page-wrapper">

  <!-- HEADER -->
  <header>
    <div class="site-title">âœ¨ Ø¨Ø·Ø§Ù‚Ø§Øª ØªÙ‡Ù†Ø¦Ø© Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ âœ¨</div>
    <div class="site-subtitle">ØµÙ…Ù‘Ù… Ø¨Ø·Ø§Ù‚ØªÙƒ Ø§Ù„Ø®Ø§ØµØ© ÙˆØ´Ø§Ø±ÙƒÙ‡Ø§ Ù…Ø¹ Ø£Ø­Ø¨Ø§Ø¦Ùƒ</div>
    <div class="ornament">
      <div class="ornament-line"></div>
      <span class="ornament-star">â˜½ â‹ â˜¾</span>
      <div class="ornament-line"></div>
    </div>

    <!-- Progress Steps -->
    <div class="progress-steps">
      <div class="step active" id="step1">
        <div class="step-num">1</div>
        <span>Ø§Ø±ÙØ¹ Ø§Ù„ØªØµÙ…ÙŠÙ…</span>
      </div>
      <div class="step-line"></div>
      <div class="step" id="step2">
        <div class="step-num">2</div>
        <span>Ø£Ø¶Ù Ø§Ù„Ø§Ø³Ù…</span>
      </div>
      <div class="step-line"></div>
      <div class="step" id="step3">
        <div class="step-num">3</div>
        <span>Ø§Ø®ØªØ± Ø§Ù„Ù…Ù‚Ø§Ø³</span>
      </div>
      <div class="step-line"></div>
      <div class="step" id="step4">
        <div class="step-num">4</div>
        <span>Ø­Ù…Ù‘Ù„ ÙˆØ´Ø§Ø±Ùƒ</span>
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main>

    <!-- LEFT COLUMN: Controls -->
    <div>

      <!-- UPLOAD CARD -->
      <div class="card" style="margin-bottom: 1.5rem;">
        <div class="card-title"><span class="icon">ğŸ–¼ï¸</span> Ø±ÙØ¹ Ø§Ù„ØªØµÙ…ÙŠÙ…</div>
        <div class="upload-zone" id="uploadZone" onclick="document.getElementById('fileInput').click()">
          <span class="upload-icon" id="uploadIcon">ğŸŒ™</span>
          <h3 id="uploadTitle">Ø§Ø±ÙØ¹ ØªØµÙ…ÙŠÙ… Ø§Ù„ØªÙ‡Ù†Ø¦Ø©</h3>
          <p id="uploadDesc">PNGØŒ JPGØŒ WEBP Ø­ØªÙ‰ 20MB<br>Ø§Ø³Ø­Ø¨ ÙˆØ£ÙÙ„Øª Ø£Ùˆ Ø§Ù†Ù‚Ø± Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±</p>
          <button class="btn-upload" type="button">
            <span>ğŸ“¤</span> Ø§Ø®ØªØ± Ù…Ù„ÙØ§Ù‹
          </button>
        </div>
        <input type="file" id="fileInput" accept="image/*">
      </div>

      <!-- NAME & STYLE CARD -->
      <div class="card" style="margin-bottom: 1.5rem;">
        <div class="card-title"><span class="icon">âœï¸</span> ØªØ®ØµÙŠØµ Ø§Ù„Ø§Ø³Ù…</div>

        <div class="input-group">
          <label class="input-label" for="nameInput">Ø§Ø³Ù… Ø§Ù„Ù…ÙÙ‡Ù†ÙÙ‘Ø£</label>
          <input type="text" id="nameInput" class="input-field" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯" maxlength="60">
        </div>

        <div class="input-group">
          <label class="input-label">Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø§Ø³Ù… Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ…ÙŠÙ…</label>
          <div class="position-grid">
            <button class="position-btn" data-pos="top-right">â†– Ø£Ø¹Ù„Ù‰ ÙŠÙ…ÙŠÙ†</button>
            <button class="position-btn" data-pos="top-center">â¬† Ø£Ø¹Ù„Ù‰ ÙˆØ³Ø·</button>
            <button class="position-btn" data-pos="top-left">â†— Ø£Ø¹Ù„Ù‰ ÙŠØ³Ø§Ø±</button>
            <button class="position-btn" data-pos="middle-right">â—€ ÙˆØ³Ø· ÙŠÙ…ÙŠÙ†</button>
            <button class="position-btn active" data-pos="middle-center">â¬› Ø§Ù„Ù…Ù†ØªØµÙ</button>
            <button class="position-btn" data-pos="middle-left">â–¶ ÙˆØ³Ø· ÙŠØ³Ø§Ø±</button>
            <button class="position-btn" data-pos="bottom-right">â†™ Ø£Ø³ÙÙ„ ÙŠÙ…ÙŠÙ†</button>
            <button class="position-btn" data-pos="bottom-center">â¬‡ Ø£Ø³ÙÙ„ ÙˆØ³Ø·</button>
            <button class="position-btn" data-pos="bottom-left">â†˜ Ø£Ø³ÙÙ„ ÙŠØ³Ø§Ø±</button>
          </div>
        </div>

        <div class="input-group">
          <label class="input-label">Ø­Ø¬Ù… Ø§Ù„Ø®Ø·</label>
          <div class="range-row">
            <input type="range" id="fontSizeRange" min="12" max="120" value="42">
            <span class="range-val" id="fontSizeVal">42px</span>
          </div>
        </div>

        <div class="input-group">
          <label class="input-label">Ù„ÙˆÙ† Ø§Ù„Ø§Ø³Ù…</label>
          <div class="color-row">
            <div class="color-dot active" style="background:#ffffff" data-color="#ffffff" title="Ø£Ø¨ÙŠØ¶"></div>
            <div class="color-dot" style="background:#c9a84c" data-color="#c9a84c" title="Ø°Ù‡Ø¨ÙŠ"></div>
            <div class="color-dot" style="background:#f5e6b8" data-color="#f5e6b8" title="Ø°Ù‡Ø¨ÙŠ ÙØ§ØªØ­"></div>
            <div class="color-dot" style="background:#0f1a2b" data-color="#0f1a2b" title="ÙƒØ­Ù„ÙŠ"></div>
            <div class="color-dot" style="background:#3a7d87" data-color="#3a7d87" title="ÙÙŠØ±ÙˆØ²ÙŠ"></div>
            <div class="color-dot" style="background:#8B5E3C" data-color="#8B5E3C" title="Ø¨Ù†ÙŠ"></div>
            <div class="color-dot" style="background:#2d5a27" data-color="#2d5a27" title="Ø£Ø®Ø¶Ø±"></div>
            <div class="color-picker-wrap">
              <input type="color" id="customColor" value="#ffffff" title="Ù„ÙˆÙ† Ù…Ø®ØµØµ">
              <span style="font-size:0.75rem; color:var(--text-muted)">Ù…Ø®ØµØµ</span>
            </div>
          </div>
        </div>

        <div class="input-group">
          <label class="input-label">Ù†Øµ Ø¥Ø¶Ø§ÙÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
          <input type="text" id="subTextInput" class="input-field" placeholder="Ù…Ø«Ø§Ù„: Ø±Ù…Ø¶Ø§Ù† Ù…Ø¨Ø§Ø±Ùƒ ÙˆØ¹ÙŠØ¯ Ø³Ø¹ÙŠØ¯" maxlength="80">
        </div>
      </div>

      <!-- SIZE CARD -->
      <div class="card">
        <div class="card-title"><span class="icon">ğŸ“</span> Ù…Ù‚Ø§Ø³ Ø§Ù„ØªØµØ¯ÙŠØ±</div>
        <div class="size-grid">
          <button class="size-btn active" data-w="1080" data-h="1080" data-name="instagram-square">
            <span class="size-icon">ğŸ“·</span>
            <span class="size-label">Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù… Ù…Ø±Ø¨Ø¹</span>
            <span class="size-dim">1080 Ã— 1080</span>
          </button>
          <button class="size-btn" data-w="1080" data-h="1920" data-name="instagram-story">
            <span class="size-icon">ğŸ“±</span>
            <span class="size-label">Ø³ØªÙˆØ±ÙŠ / ÙˆØ§ØªØ³Ø§Ø¨</span>
            <span class="size-dim">1080 Ã— 1920</span>
          </button>
          <button class="size-btn" data-w="1200" data-h="630" data-name="facebook-post">
            <span class="size-icon">ğŸ‘¥</span>
            <span class="size-label">ÙÙŠØ³Ø¨ÙˆÙƒ / ØªÙˆÙŠØªØ±</span>
            <span class="size-dim">1200 Ã— 630</span>
          </button>
          <button class="size-btn" data-w="1080" data-h="608" data-name="linkedin">
            <span class="size-icon">ğŸ’¼</span>
            <span class="size-label">Ù„ÙŠÙ†ÙƒØ¯Ø¥Ù†</span>
            <span class="size-dim">1080 Ã— 608</span>
          </button>
          <button class="size-btn" data-w="2480" data-h="3508" data-name="a4-print">
            <span class="size-icon">ğŸ–¨ï¸</span>
            <span class="size-label">A4 Ø·Ø¨Ø§Ø¹Ø©</span>
            <span class="size-dim">2480 Ã— 3508</span>
          </button>
          <button class="size-btn" data-w="800" data-h="600" data-name="whatsapp">
            <span class="size-icon">ğŸ“²</span>
            <span class="size-label">ÙˆØ§ØªØ³Ø§Ø¨ Ø¹Ø§Ø¯ÙŠ</span>
            <span class="size-dim">800 Ã— 600</span>
          </button>
        </div>

        <div class="divider"></div>

        <div class="card-title" style="margin-bottom: 0.8rem;"><span class="icon">ğŸ’¾</span> ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©</div>
        <div class="download-grid">
          <button class="btn-download" id="btnDownloadPng" disabled onclick="downloadImage('png')">
            <span>â¬‡</span> ØªØ­Ù…ÙŠÙ„ PNG
          </button>
          <button class="btn-download secondary" id="btnDownloadJpg" disabled onclick="downloadImage('jpg')">
            <span>â¬‡</span> ØªØ­Ù…ÙŠÙ„ JPG
          </button>
        </div>
      </div>

    </div>

    <!-- RIGHT COLUMN: Preview + Share -->
    <div class="preview-column">

      <!-- PREVIEW CARD -->
      <div class="card" style="margin-bottom: 1.5rem;">
        <div class="card-title"><span class="icon">ğŸ‘ï¸</span> Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©</div>
        <div class="preview-wrapper">
          <div id="empty-preview" class="empty-preview">
            <span class="empty-icon">ğŸŒ™</span>
            <p>Ø§Ø±ÙØ¹ ØªØµÙ…ÙŠÙ… Ø§Ù„ØªÙ‡Ù†Ø¦Ø© Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©<br>Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ù…Ø¹ Ø§Ø³Ù…Ùƒ</p>
          </div>
          <div id="preview-container" style="display:none; position:relative; width:100%;">
            <img id="preview-image" alt="Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ø±ÙÙˆØ¹">
            <div id="name-overlay"></div>
          </div>
        </div>
        <p style="font-size:0.78rem; color:var(--text-muted); margin-top:0.7rem; text-align:center;">
          ğŸ“Œ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© ØªÙ‚Ø±ÙŠØ¨ÙŠØ© â€” Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø³ÙŠÙƒÙˆÙ† Ø¨Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„ÙØ¹Ù„ÙŠ Ø§Ù„Ù…Ø­Ø¯Ø¯
        </p>
      </div>

      <!-- SHARE CARD -->
      <div class="card">
        <div class="card-title"><span class="icon">ğŸ“¤</span> Ù…Ø´Ø§Ø±ÙƒØ© Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹</div>
        <p style="font-size:0.84rem; color:var(--text-muted); margin-bottom:0.8rem; line-height:1.7;">
          Ø£Ø±Ø³Ù„ Ø±Ø§Ø¨Ø· Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ù„Ø£ØµØ¯Ù‚Ø§Ø¦Ùƒ ÙˆØ¹Ø§Ø¦Ù„ØªÙƒ Ù„ÙŠØµÙ†Ø¹ÙˆØ§ Ø¨Ø·Ø§Ù‚ØªÙ‡Ù… Ø§Ù„Ø®Ø§ØµØ© ÙˆÙŠÙ‡Ù†Ø¦ÙˆØ§ Ø±Ù…Ø¶Ø§Ù† ğŸŒ™
        </p>

        <div class="share-link-box">
          <input class="share-link-input" id="shareUrl" value="" readonly>
          <button class="btn-copy" onclick="copyLink()">Ù†Ø³Ø®</button>
        </div>

        <div class="share-buttons">
          <button class="btn-share whatsapp" onclick="shareWhatsApp()">
            <span>ğŸ’¬</span> ÙˆØ§ØªØ³Ø§Ø¨
          </button>
          <button class="btn-share twitter" onclick="shareTwitter()">
            <span>ğŸ¦</span> ØªÙˆÙŠØªØ± / X
          </button>
          <button class="btn-share telegram" onclick="shareTelegram()">
            <span>âœˆï¸</span> ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…
          </button>
        </div>

        <div class="divider"></div>

        <div class="card-title" style="margin-bottom:0.6rem;"><span class="icon">ğŸ’Œ</span> Ø±Ø³Ø§Ù„Ø© ØªÙ‡Ù†Ø¦Ø© Ø¬Ø§Ù‡Ø²Ø©</div>
        <div style="background:var(--surface2); border-radius:10px; padding:1rem; border:1px solid var(--border);">
          <p id="greeting-text" style="font-size:0.88rem; line-height:1.9; color:var(--cream);">
            ğŸŒ™ Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ… ğŸŒ™<br>
            Ø£Ø¹Ø§Ø¯Ù‡ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙƒÙ… Ø¨Ø§Ù„Ø®ÙŠØ± ÙˆØ§Ù„Ø¨Ø±ÙƒØ§Øª<br>
            ÙƒÙ„ Ø¹Ø§Ù… ÙˆØ£Ù†ØªÙ… Ø¨Ø®ÙŠØ± ÙˆØµØ­Ø© ÙˆØ³Ù„Ø§Ù…Ø© ğŸ¤²<br>
            <span id="sender-name-greeting"></span>
          </p>
        </div>
        <button class="btn-copy" style="margin-top:0.6rem; width:100%;" onclick="copyGreeting()">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø±Ø³Ø§Ù„Ø©</button>
      </div>

    </div>
  </main>
</div>

<script>
  // ===== STATE =====
  let uploadedImage = null;
  let selectedPos = 'middle-center';
  let selectedColor = '#ffffff';
  let selectedSize = { w: 1080, h: 1080, name: 'instagram-square' };

  // ===== INIT =====
  document.getElementById('shareUrl').value = window.location.href;

  // ===== UPLOAD =====
  const fileInput = document.getElementById('fileInput');
  const uploadZone = document.getElementById('uploadZone');

  fileInput.addEventListener('change', e => {
    if (e.target.files[0]) handleFile(e.target.files[0]);
  });

  uploadZone.addEventListener('dragover', e => {
    e.preventDefault();
    uploadZone.classList.add('drag-over');
  });

  uploadZone.addEventListener('dragleave', () => uploadZone.classList.remove('drag-over'));

  uploadZone.addEventListener('drop', e => {
    e.preventDefault();
    uploadZone.classList.remove('drag-over');
    const file = e.dataTransfer.files[0];
    if (file && file.type.startsWith('image/')) handleFile(file);
  });

  function handleFile(file) {
    if (file.size > 20 * 1024 * 1024) { showToast('Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù ÙŠØªØ¬Ø§ÙˆØ² 20MB'); return; }
    const reader = new FileReader();
    reader.onload = e => {
      uploadedImage = e.target.result;
      document.getElementById('preview-image').src = uploadedImage;
      document.getElementById('preview-container').style.display = 'flex';
      document.getElementById('empty-preview').style.display = 'none';
      document.getElementById('uploadIcon').textContent = 'âœ…';
      document.getElementById('uploadTitle').textContent = file.name;
      document.getElementById('uploadDesc').textContent = `${(file.size/1024).toFixed(0)} KB | Ø§Ù†Ù‚Ø± Ù„ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØ±Ø©`;
      document.getElementById('btnDownloadPng').disabled = false;
      document.getElementById('btnDownloadJpg').disabled = false;
      markStep(1);
      updateOverlay();
    };
    reader.readAsDataURL(file);
  }

  // ===== NAME INPUT =====
  document.getElementById('nameInput').addEventListener('input', () => {
    updateOverlay();
    if (document.getElementById('nameInput').value.trim()) markStep(2);
    // Update greeting
    const name = document.getElementById('nameInput').value.trim();
    document.getElementById('sender-name-greeting').textContent = name ? `Ù…ÙÙ‚Ø¯ÙÙ‘Ù…Ø© Ù…Ù†: ${name}` : '';
  });

  document.getElementById('subTextInput').addEventListener('input', updateOverlay);

  // ===== POSITION =====
  document.querySelectorAll('.position-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.position-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      selectedPos = btn.dataset.pos;
      updateOverlay();
    });
  });

  // ===== FONT SIZE =====
  const fontSizeRange = document.getElementById('fontSizeRange');
  const fontSizeVal = document.getElementById('fontSizeVal');
  fontSizeRange.addEventListener('input', () => {
    fontSizeVal.textContent = fontSizeRange.value + 'px';
    updateOverlay();
  });

  // ===== COLOR =====
  document.querySelectorAll('.color-dot').forEach(dot => {
    dot.addEventListener('click', () => {
      document.querySelectorAll('.color-dot').forEach(d => d.classList.remove('active'));
      dot.classList.add('active');
      selectedColor = dot.dataset.color;
      updateOverlay();
    });
  });

  document.getElementById('customColor').addEventListener('input', e => {
    document.querySelectorAll('.color-dot').forEach(d => d.classList.remove('active'));
    selectedColor = e.target.value;
    updateOverlay();
  });

  // ===== SIZE SELECTION =====
  document.querySelectorAll('.size-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      selectedSize = { w: +btn.dataset.w, h: +btn.dataset.h, name: btn.dataset.name };
      markStep(3);
      showToast(`ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù…Ù‚Ø§Ø³ ${selectedSize.w}Ã—${selectedSize.h}`);
    });
  });

  // ===== OVERLAY UPDATE =====
  function updateOverlay() {
    const name = document.getElementById('nameInput').value.trim();
    const subText = document.getElementById('subTextInput').value.trim();
    const overlay = document.getElementById('name-overlay');
    const container = document.getElementById('preview-container');
    const img = document.getElementById('preview-image');

    if (!uploadedImage) return;

    const fontSize = parseInt(fontSizeRange.value);

    // Calculate position
    const rect = img.getBoundingClientRect();
    const containerRect = container.getBoundingClientRect();
    const imgLeft = rect.left - containerRect.left;
    const imgTop = rect.top - containerRect.top;
    const imgW = rect.width;
    const imgH = rect.height;

    let x, y;
    const pad = 0.08;

    const [vPos, hPos] = selectedPos.split('-');
    x = hPos === 'right' ? imgLeft + imgW * pad :
        hPos === 'left'  ? imgLeft + imgW * (1 - pad) :
                           imgLeft + imgW * 0.5;
    y = vPos === 'top'    ? imgTop + imgH * pad :
        vPos === 'bottom' ? imgTop + imgH * (1 - pad) :
                            imgTop + imgH * 0.5;

    // Scale font to preview
    const scale = imgW / selectedSize.w;
    const displaySize = Math.max(10, Math.round(fontSize * scale));

    overlay.style.cssText = `
      position: absolute;
      left: ${x}px;
      top: ${y}px;
      transform: translate(-50%, -50%);
      font-size: ${displaySize}px;
      color: ${selectedColor};
      font-family: 'IBM Plex Sans Arabic', sans-serif;
      font-weight: 700;
      text-align: center;
      white-space: nowrap;
      z-index: 10;
      text-shadow: 2px 2px 8px rgba(0,0,0,0.8), 0 0 20px rgba(0,0,0,0.5);
      pointer-events: none;
      line-height: 1.4;
    `;

    overlay.innerHTML = '';
    if (name) {
      const nameDiv = document.createElement('div');
      nameDiv.textContent = name;
      overlay.appendChild(nameDiv);
    }
    if (subText) {
      const subDiv = document.createElement('div');
      subDiv.textContent = subText;
      subDiv.style.fontSize = `${Math.round(displaySize * 0.65)}px`;
      subDiv.style.opacity = '0.85';
      subDiv.style.marginTop = '4px';
      overlay.appendChild(subDiv);
    }
  }

  // Update overlay when image loads / window resizes
  document.getElementById('preview-image').addEventListener('load', () => {
    setTimeout(updateOverlay, 100);
  });

  window.addEventListener('resize', updateOverlay);

  // ===== DOWNLOAD =====
  function downloadImage(format) {
    if (!uploadedImage) { showToast('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø±ÙØ¹ ØµÙˆØ±Ø© Ø£ÙˆÙ„Ø§Ù‹'); return; }
    showLoading(true);
    markStep(4);

    const name = document.getElementById('nameInput').value.trim();
    const subText = document.getElementById('subTextInput').value.trim();
    const fontSize = parseInt(fontSizeRange.value);
    const W = selectedSize.w;
    const H = selectedSize.h;

    const canvas = document.getElementById('export-canvas');
    canvas.width = W;
    canvas.height = H;
    const ctx = canvas.getContext('2d');

    const img = new Image();
    img.crossOrigin = 'anonymous';
    img.onload = () => {
      // Draw image (cover)
      const imgAspect = img.width / img.height;
      const canvasAspect = W / H;
      let drawW, drawH, drawX, drawY;

      if (imgAspect > canvasAspect) {
        drawH = H; drawW = H * imgAspect;
        drawX = (W - drawW) / 2; drawY = 0;
      } else {
        drawW = W; drawH = W / imgAspect;
        drawX = 0; drawY = (H - drawH) / 2;
      }

      ctx.drawImage(img, drawX, drawY, drawW, drawH);

      // Draw text
      if (name || subText) {
        ctx.textAlign = 'center';

        const pad = 0.08;
        const [vPos, hPos] = selectedPos.split('-');
        const x = hPos === 'right' ? W * pad :
                  hPos === 'left'  ? W * (1 - pad) :
                                     W * 0.5;
        const y = vPos === 'top'    ? H * pad :
                  vPos === 'bottom' ? H * (1 - pad) :
                                      H * 0.5;

        // Shadow
        ctx.shadowColor = 'rgba(0,0,0,0.85)';
        ctx.shadowBlur = Math.round(fontSize * 0.4);
        ctx.shadowOffsetX = 2;
        ctx.shadowOffsetY = 2;

        if (name) {
          ctx.font = `700 ${fontSize}px "IBM Plex Sans Arabic", Arial`;
          ctx.fillStyle = selectedColor;
          ctx.fillText(name, x, y);
        }

        if (subText) {
          ctx.font = `500 ${Math.round(fontSize * 0.65)}px "IBM Plex Sans Arabic", Arial`;
          ctx.fillStyle = selectedColor;
          ctx.globalAlpha = 0.88;
          ctx.fillText(subText, x, y + fontSize * 1.2);
          ctx.globalAlpha = 1;
        }

        ctx.shadowColor = 'transparent';
        ctx.shadowBlur = 0;
      }

      // Export
      const mimeType = format === 'jpg' ? 'image/jpeg' : 'image/png';
      const quality = format === 'jpg' ? 0.92 : 1;
      const dataUrl = canvas.toDataURL(mimeType, quality);

      const link = document.createElement('a');
      link.download = `ramadan-greeting-${name || 'card'}-${selectedSize.name}.${format}`;
      link.href = dataUrl;
      link.click();

      showLoading(false);
      showToast(`âœ… ØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­ (${W}Ã—${H})`);
    };

    img.onerror = () => {
      showLoading(false);
      showToast('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©');
    };

    img.src = uploadedImage;
  }

  // ===== SHARE =====
  function copyLink() {
    navigator.clipboard.writeText(window.location.href)
      .then(() => showToast('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·!'))
      .catch(() => {
        const el = document.getElementById('shareUrl');
        el.select();
        document.execCommand('copy');
        showToast('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·!');
      });
  }

  function shareWhatsApp() {
    const msg = encodeURIComponent(`ğŸŒ™ Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ… ğŸŒ™\nØµÙ†Ù‘Ø¹ Ø¨Ø·Ø§Ù‚Ø© ØªÙ‡Ù†Ø¦Ø© Ø±Ù…Ø¶Ø§Ù†ÙŠØ© Ø®Ø§ØµØ© Ø¨Ùƒ!\n${window.location.href}`);
    window.open(`https://wa.me/?text=${msg}`, '_blank');
  }

  function shareTwitter() {
    const msg = encodeURIComponent(`ğŸŒ™ Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ…! ØµÙ†Ù‘Ø¹ Ø¨Ø·Ø§Ù‚Ø© ØªÙ‡Ù†Ø¦Ø© Ø±Ù…Ø¶Ø§Ù†ÙŠØ© Ø®Ø§ØµØ© Ø¨Ùƒ ğŸŒŸ\n${window.location.href}`);
    window.open(`https://twitter.com/intent/tweet?text=${msg}`, '_blank');
  }

  function shareTelegram() {
    const msg = encodeURIComponent(`ğŸŒ™ Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ…!\nØµÙ†Ù‘Ø¹ Ø¨Ø·Ø§Ù‚Ø© ØªÙ‡Ù†Ø¦Ø© Ø±Ù…Ø¶Ø§Ù†ÙŠØ© Ø®Ø§ØµØ© Ø¨Ùƒ`);
    window.open(`https://t.me/share/url?url=${encodeURIComponent(window.location.href)}&text=${msg}`, '_blank');
  }

  function copyGreeting() {
    const name = document.getElementById('nameInput').value.trim();
    const text = `ğŸŒ™ Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ… ğŸŒ™\nØ£Ø¹Ø§Ø¯Ù‡ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙƒÙ… Ø¨Ø§Ù„Ø®ÙŠØ± ÙˆØ§Ù„Ø¨Ø±ÙƒØ§Øª\nÙƒÙ„ Ø¹Ø§Ù… ÙˆØ£Ù†ØªÙ… Ø¨Ø®ÙŠØ± ÙˆØµØ­Ø© ÙˆØ³Ù„Ø§Ù…Ø© ğŸ¤²${name ? '\nÙ…ÙÙ‚Ø¯ÙÙ‘Ù…Ø© Ù…Ù†: ' + name : ''}`;
    navigator.clipboard.writeText(text)
      .then(() => showToast('âœ… ØªÙ… Ù†Ø³Ø® Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙ‡Ù†Ø¦Ø©!'))
      .catch(() => showToast('ÙŠØ±Ø¬Ù‰ Ù†Ø³Ø® Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙŠØ¯ÙˆÙŠØ§Ù‹'));
  }

  // ===== HELPERS =====
  function showLoading(show) {
    document.getElementById('loading-overlay').classList.toggle('show', show);
  }

  function showToast(msg) {
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 2500);
  }

  function markStep(n) {
    for (let i = 1; i <= 4; i++) {
      const step = document.getElementById('step' + i);
      if (i < n) { step.classList.add('done'); step.classList.remove('active'); }
      else if (i === n) { step.classList.add('active'); step.classList.remove('done'); }
      else { step.classList.remove('active', 'done'); }
    }
  }
</script>
</body>
</html>
